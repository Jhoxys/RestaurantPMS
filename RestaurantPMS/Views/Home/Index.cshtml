@using Microsoft.AspNetCore.Html

@model List<Product>

@{
    ViewData["Title"] = "Home Page";

    int pageIndex = (int)ViewData["PageIndex"]!;
    int totalPages = (int)ViewData["TotalPages"]!;
    string search = (string)ViewData["Search"]!;
    var DisplayCategory = "none";

    var idTableTemp = TempData["Id_Table"];

    var orders = ViewBag.Orders as List<Order>;

}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script type="text/javascript">
    // Script to activate the sidebar toggle

    document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("miFormulario");

        // form.addEventListener("submit", function (e) {
        //     e.preventDefault(); // 🔴 Esto previene el envío normal



        // });
    });
</script>
<script>
    let cont = 0;


    function Arrow() {

        let arrow = document.querySelector("#Arrows");
        let category = document.querySelector("#Category");
        let mesa = document.querySelector("#Mesa");

        arrow.style.display = 'none';

        category.style.display = 'none';

        mesa.style.display = 'block';

    }


    function mesa(id) {

        let arrow = document.querySelector("#Arrows");
        let category = document.querySelector("#Category");
        let mesa = document.querySelector("#Mesa");
        let seletMesa = document.querySelector("#seletMesa");

        seletMesa.innerHTML = "Mesa seleccionada: " + id;

        cont++;
        if (cont == 1) {

            cont == 0;
        }

        category.style.display = 'block';
        arrow.style.display = 'block';
        mesa.style.display = 'none';

        // seletMesa.style.display = 'block';
        //  const nuevaUrl = "?Id_Table=" + encodeURIComponent(id);
        //  history.pushState(null, "", nuevaUrl);
        sessionStorage.setItem("mesaId", id);

    }
    function sortTable(column) {
        // optener la mesa


        const params = new URLSearchParams(window.location.search);
        const idTable = params.get("Id_Table");
        const tablaSegunda = document.getElementById("Oder");


        window.location.href = "?search=" + column;

    }


    function addItem(boton) {


        let mesa = "Mesa1"; // o como corresponda

        const filaOriginal = boton.closest("tr");
        const filaUno = filaOriginal.cloneNode(true);


        const tablaSegunda = document.getElementById("Oder");
        const filaOriginalDos = boton.closest("tr");
        const filaDos = filaOriginalDos.cloneNode(true);

        //filaClonadaDos.cells[0].textContent = parseFloat(filaOriginalDos.cells[0].textContent) + 1;
        const NameVal = filaOriginal.cells[1].textContent;
        const preciVal = parseFloat(filaOriginal.cells[4].textContent);

        // <input  id="id_Product" hidden />
        //                                          <input id="id_table" hidden />



        const IdMesa = sessionStorage.getItem("mesaId");
        const idTable = document.querySelector("#id_table");
        idTable.value = IdMesa;


        // tablaSegunda.innerHTML += `

        //                           <div class="fila-datos">
        //                                     <span class="col producto">${NameVal}</span>
        //                                     <span class="col mesa">${IdMesa}</span>
        //                                     <span class="col precio">$${preciVal}</span>

        //                        </div>

        //                     `;


        // <th scope="row">${index}</th>
        //    <td><input class="form-control" name="BillingDto[${index}].CodeProduct" value="${CodeR}" readonly /></td>
        //     <td><input class="form-control" name="BillingDto[${index}].Name" value="${CNameR}" readonly /></td>
        //     <td><input class="form-control" name="BillingDto[${index}].Stock" value="${FStockR}" readonly /></td>
        //     <td><input class="form-control" name="BillingDto[${index}].Description" value="${FDesction}" readonly  /> </td>
        //     <td><input class="form-control" name="BillingDto[${index}].Quantitys"  value="${FQtyR}"  readonly  /></td>
        //     <td><input class="form-control" name="BillingDto[${index}].Price"  value="${FPriceR}"  readonly  /></td>
        //     <td><input class="form-control" id="ValAmount" name="BillingDto[${index}].amount"  value="${Famountval}" readonly  /></td>
        //     <td><button class="btn btn-danger text-capitalize active"  onclick="eliminarFila(this)">Eliminar</button></td>
        //     <td><input name="BillingDto[${index}].ITB" id="TotalITBS" type="hidden" value="${TotalITBS}" />
        //         <input name="BillingDto[${index}].NoFactura" value="@ViewBag.NoFactura" type="hidden" />
        //         <input name="BillingDto[${index}].Checks" id="checksActiver" type="hidden" value="${checksImp}" />
        //     </td>
        //rellenar tabla con producto;
        //const FName = filaOriginal.querySelector('input[name="Name"]');
        // FName.value = filaOriginalDos.cells[0].textContent;

        // const FPrice = filaOriginal.querySelector('input[name="Price"]');
        // FPrice.value = preciVal;
        // FPrice.disabled = true;

        // const FQty = filaOriginal.querySelector('input[name="Quantitys"]');
        // FQty.value = 1;

        // const FCode = filaOriginal.querySelector('input[name="CodeProduct"]');
        // FCode.value = filaOriginalDos.cells[6].textContent;


        // const FDesc = filaOriginal.querySelector('input[name="Description"]');
        // FDesc.value = filaOriginalDos.cells[7].textContent;
        // FDesc.disabled = true;

        // const FStock = filaOriginal.querySelector('input[name="Stock"]');
        // FStock.value = filaOriginalDos.cells[5].textContent;


        // const ArtControl = document.getElementById('ArtControl');
        // ArtControl.style.display = 'none';
        // const btn = document.querySelector('#btStore');
        // btn.innerHTML = '<i class="bi bi-cart4"></i>Store';
        // CambCantidad();


    }




</script>



<!-- Contenido -->
<div class="container mt-4">
    <div class="row g-4">
        <!-- Pedidos recientes -->
        <div class="col-md-6">
            <div class="card-recent">
                <h5 class="mb-3 fw-bold">Pedidos Recientes</h5>
                <div class="d-flex justify-content-between mb-2">
                    <div>
                        <div class="fw-bold">Mesa 1</div>
                        <small>$15.99 • Juan Pérez</small>
                    </div>
                    <span class="status-badge status-pendiente">Pendiente</span>
                </div>
                <div class="d-flex justify-content-between mb-2">
                    <div>
                        <div class="fw-bold">Mesa 1</div>
                        <small>$31.98 • Juan Pérez</small>
                    </div>
                    <span class="status-badge status-entregado">Entregado</span>
                </div>
                <div class="d-flex justify-content-between mb-2">
                    <div>
                        <div class="fw-bold">Mesa 1</div>
                        <small>$31.98 • Juan Pérez</small>
                    </div>
                    <span class="status-badge status-entregado">Entregado</span>
                </div>
                <div class="d-flex justify-content-between mb-2">
                    <div>
                        <div class="fw-bold">Mesa 5</div>
                        <small>$61.97 • María González</small>
                    </div>
                    <span class="status-badge status-listo">Listo</span>
                </div>
                <div class="d-flex justify-content-between mb-2">
                    <div>
                        <div class="fw-bold">Mesa 10</div>
                        <small>$39.48 • María González</small>
                    </div>
                    <span class="status-badge status-entregado">Entregado</span>
                </div>
            </div>
        </div>

        <!-- Estado de mesas -->
        <div class="col-md-6">
            <div class="card-tables">
                <h5 class="mb-3 fw-bold">Estado de Mesas</h5>
                <div class="d-flex flex-wrap">
                    <div class="mesa ocupada">1</div>
                    <div class="mesa disponible">2</div>
                    <div class="mesa disponible">3</div>
                    <div class="mesa disponible">4</div>
                    <div class="mesa ocupada">5</div>
                    <div class="mesa disponible">6</div>
                    <div class="mesa disponible">7</div>
                    <div class="mesa disponible">8</div>
                    <div class="mesa disponible">9</div>
                    <div class="mesa disponible">10</div>
                </div>
            </div>
        </div>
    </div>
</div>